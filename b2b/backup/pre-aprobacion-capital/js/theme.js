$(function(){$.extend($.validator.messages,{required:"Campo Requerido."}),$.validator.addMethod("validEmail",function(e,t){var o=$.validator.methods.email.bind(this),a=e.slice(e.lastIndexOf("@")+1),a=-1<a.indexOf(".")&&2<=a.slice(a.lastIndexOf(".")+1).length;return this.optional(t)||o(e,t)&&a},function(e,t){return"Por favor entre un correo electrónico válido."}),$.validator.addMethod("validString",function(e,t){return this.optional(t)||0<$.trim(e).length},$.validator.format("Por favor entre una información válida.")),$.validator.addMethod("validPhone",function(e,t){return this.optional(t)||/^\(\d{3}\)\s\d{3}-\d{4}$/.test(e)},function(e,t){return"Formato Teléfono (XXX) XXX-XXXX."}),$(".contact-form").each(function(){$(this).validate({submitHandler:function(e){var e=$(e),t=$(this.submitButton),e=e.serializeArray();t.button("loading"),(window.dataLayer||[]).push({event:"submit_form",completed_step:"Step 0"}),$.ajax({type:"POST",url:"php/form-application.php",data:e,dataType:"json",complete:function(e){if("object"==typeof e.responseJSON){if("success"==e.responseJSON.response)return 1<e.responseJSON.r.length?void(window.location.href=e.responseJSON.r):void(window.location.href=JSON.parse(e.responseJSON.d).next_step_url);alert("Al parecer tenemos un problema temporero. Por favor verifique todos los campos.")}else alert("Error no definido, trate otra vez luego.");t.button("reset")}})},errorClass:"error",errorPlacement:function(e,t){},highlight:function(e,t,o){e=$(e);(e.hasClass("select-item")?e.next():e).addClass(t)},unhighlight:function(e,t,o){e=$(e);(e.hasClass("select-item")?e.next():e).removeClass(t)}})}),$(document).on("change",".select-item",function(){$(this).valid()}),$('[type="email"]').each(function(){$(this).rules("add",{email:!1}),$(this).rules("add","validEmail")})}),$(function(){$.ajax({method:"POST",url:"php/store-data.php",data:{url:window.location.href},dataType:"json"})}),$(function(){$('[name="owner_1_cell_phone"]').mask("(000) 000-0000",{clearIfNotMatch:!0}),$(".select-item").each(function(){var e=$(this);e.select2({placeholder:e.data("select-placeholder")&&0<e.data("select-placeholder").length?e.data("select-placeholder"):"Please select...",allowClear:!0,minimumResultsForSearch:1/0})}),$('[name="owner_name"]').on("keyup focusout",function(){!function(e){var t=e.val(),e=t.split(" ").slice(0,-1).join(" ").trim(),t=t.split(" ").slice(-1).join(" ").trim();0==e.length&&0<t.length&&(e=t,t="");$('[name="owner_1_first_name"]').val(e),$('[name="owner_1_last_name"]').val(t)}($(this))})});