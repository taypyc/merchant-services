$(function(){$.fn.extend({disable:function(t){return this.each(function(){var e=$(this);e.prop("disabled",t),!0===t&&void 0!==e.data("loading-content")&&(e.data("original-content",e.html()),e.html(e.data("loading-content"))),!1===t&&void 0!==e.data("original-content")&&e.html(e.data("original-content"))})}}),$.validator.addMethod("validEmail",function(e,t){var a=$.validator.methods.email.bind(this),s=e.slice(e.lastIndexOf("@")+1),n=-1<s.indexOf(".")&&2<=s.slice(s.lastIndexOf(".")+1).length;return this.optional(t)||a(e,t)&&n},function(e,t){return"Please enter a valid email address."}),$.validator.addMethod("validString",function(e,t){return this.optional(t)||0<$.trim(e).length},$.validator.format("Please enter a valid info.")),$.validator.addMethod("validPhone",function(e,t){return this.optional(t)||/^\(\d{3}\)\s\d{3}-\d{4}$/.test(e)},function(e,t){return"Phone format (XXX) XXX-XXXX"}),$.validator.addMethod("validZip",function(e,t){return this.optional(t)||/^\d{5}$/.test(e)},function(e,t){return"Zip format XXXXX"}),$.validator.addMethod("validDateFull",function(e,t){return this.optional(t)||function(e){if(!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))return!1;var t=e.split("/"),a=parseInt(t[0],10),s=parseInt(t[1],10),n=parseInt(t[2],10),i=new Date;if(n<1900||n>i.getFullYear()||0==a||12<a)return!1;var l=[31,28,31,30,31,30,31,31,30,31,30,31];return(n%400==0||n%100!=0&&n%4==0)&&(l[1]=29),0<s&&s<=l[a-1]}(e)},function(e,t){return"Date format MM/DD/YYYY"}),$.validator.addMethod("validMonthDate",function(e,t){return this.optional(t)||function(e){if(!/^\d{1,2}\/\d{1,2}$/.test(e))return!1;var t=e.split("/"),a=parseInt(t[0],10),s=parseInt(t[1],10),n=2020;if(n>(new Date).getFullYear()||0==a||12<a)return!1;var i=[31,28,31,30,31,30,31,31,30,31,30,31];return i[1]=29,0<s&&s<=i[a-1]}(e)},function(e,t){return"MONTH/DATE"}),$.validator.addMethod("fileSize",function(e,t,a){return this.optional(t)||1e6*a>=t.files[0].size},"File size should be less than {0} MB"),$("#form").validate({submitHandler:function(e){var t=(e=$(e)).find('[type="submit"]'),a=new FormData(e[0]);t.disable(!0),$.ajax({method:"POST",url:"php/save-info.php",data:a,contentType:!1,processData:!1,dataType:"json",complete:function(e){if("object"==typeof e.responseJSON){if("success"==e.responseJSON.response)return void(window.location.href=e.responseJSON.r);alert(e.responseJSON.d)}else alert("Undefined error, please try again later.");t.disable(!1)}})},errorClass:"error",errorPlacement:function(e,t){var a=$(t);a.hasClass("select-item")?e.insertAfter(a.next()):a.hasClass("custom-file-input")?e.insertAfter(a.parent()):e.insertAfter(a)},highlight:function(e,t,a){var s=$(e);s.hasClass("select-item")?s.next().addClass(t):s.hasClass("custom-file-input")?s.closest(".custom-file").addClass(t):s.addClass(t)},unhighlight:function(e,t,a){var s=$(e);s.hasClass("select-item")?s.next().removeClass(t):s.hasClass("custom-file-input")?s.closest(".custom-file").removeClass(t):s.removeClass(t)}});var e=[];e.push("agent_name"),e.push("manager_name"),e.push("agent_id"),e.push("business_dba_name"),e.push("business_phone"),e.push("business_address"),e.push("business_city"),e.push("business_state"),e.push("business_zip"),e.push("owner_1_first_name"),e.push("appt_date"),e.push("appt_time"),e.push("file_01");for(var t=0;t<e.length;t++)$('[name="'+e[t]+'"]').rules("add","required");$("[data-mask-phone]").each(function(){$(this).rules("add","validPhone")}),$('[type="email"]').each(function(){$(this).rules("add",{email:!1}),$(this).rules("add","validEmail")}),$("[data-field-string]").each(function(){$(this).rules("add","validString")}),$("[data-mask-zip]").each(function(){$(this).rules("add","validZip")}),$("[data-mask-month-date]").each(function(){$(this).rules("add","validMonthDate")}),$("[data-filesize]").each(function(){$(this).rules("add",{fileSize:8})});$(document).on("mask-it",function(){$("[data-mask-phone]").mask("(000) 000-0000"),$("[data-mask-zip]").mask("00000"),$("[data-mask-date]").mask("00/00/0000"),$("[data-mask-month-date]").mask("00/00")}).trigger("mask-it"),$(".select-item").each(function(){var e=$(this);e.select2({placeholder:e.data("select-placeholder")&&0<e.data("select-placeholder").length?e.data("select-placeholder"):"",allowClear:!0,minimumResultsForSearch:e.is("[data-select-input]")?0:1/0})}),$(".select-item").on("change.s2v",function(){$(this).valid()}),$("[data-select-input]").on("select2:open",function(){$(".select2-search__field").focus()}),$(".custom-file-input").each(function(){$(this).on("change",function(){var e=$(this),t=e.val().split("\\").pop();t.length?(e.next(".custom-file-label").find(".cfl-text > span").text(t),e.addClass("custom-file-input-selected")):e.removeClass("custom-file-input-selected"),$(".fileinput-error-description").length&&$(".fileinput-error-description").remove(),e.valid()})})}),$(function(){var e=bowser.getParser(window.navigator.userAgent),t=e.parsedResult.browser.name,a=e.parsedResult.os.name,s=e.parsedResult.platform.type;"Internet Explorer"==t&&$("html").addClass("ms-ie"),"Microsoft Edge"==t&&$("html").addClass("ms-edge"),"Opera"==t&&$("html").addClass("opera"),"macOS"==a&&$("html").addClass("macos"),"mobile"==s||"tablet"==s?$("html").addClass("mt-device"):$("html").addClass("desktop-device")}),$(function(){var e=$("#toast-block");function t(){e.length&&0<e.outerHeight()&&e.fadeOut(300)}e.length&&0<e.outerHeight()&&setTimeout(t,3e3),$("#toast-block-close").on("click",function(){t()})});