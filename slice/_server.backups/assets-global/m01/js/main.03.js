$(function(){$.extend($.validator.messages,{required:"Required field."}),$.validator.addMethod("validEmail",function(e,t){var a=$.validator.methods.email.bind(this),n=e.slice(e.lastIndexOf("@")+1),n=-1<n.indexOf(".")&&2<=n.slice(n.lastIndexOf(".")+1).length;return this.optional(t)||a(e,t)&&n},function(e,t){return"Please enter a valid email."}),$.validator.addMethod("validDateYear",function(e,t){return this.optional(t)||function(e){if(!/^\d{4}$/.test(e))return!1;var t=new Date;return!(e<1700||e>t.getFullYear())}(e)},function(e,t){return"Date format XXXX"}),$.validator.addMethod("validString",function(e,t){return this.optional(t)||0<$.trim(e).length},$.validator.format("Please enter valid information.")),$.validator.addMethod("validPhone",function(e,t){return this.optional(t)||/^\(\d{3}\)\s\d{3}-\d{4}$/.test(e)},function(e,t){return"Phone Format (XXX) XXX-XXXX."}),$(".contact-form").each(function(){$(this).validate({submitHandler:function(e){var e=$(e),t=$(this.submitButton),e=e.serializeArray();t.button("loading"),(window.dataLayer||[]).push({event:"submit_form",completed_step:"completed-step-0"}),$.ajax({type:"POST",url:"php/form-application.php",data:e,dataType:"json",complete:function(e){if("object"==typeof e.responseJSON){if("success"==e.responseJSON.response)return 1<e.responseJSON.r.length?void(window.location.href=e.responseJSON.r):void(window.location.href="thank-you");alert("We seem to have a temporary problem. Please check all the fields.")}else alert("Undefined error, try again later.");t.button("reset")}})},errorClass:"error",errorPlacement:function(e,t){},highlight:function(e,t,a){e=$(e);(e.hasClass("select-item")?e.next():e).addClass(t)},unhighlight:function(e,t,a){e=$(e);(e.hasClass("select-item")?e.next():e).removeClass(t)}})}),$(document).on("change",".select-item",function(){$(this).valid()}),$('[type="email"]').each(function(){$(this).rules("add",{email:!1}),$(this).rules("add","validEmail")}),$('[name="business_term"]').each(function(){$(this).rules("add","validDateYear")})}),$(function(){$('[name="business_phone"]').mask("(000) 000-0000",{clearIfNotMatch:!0}),$("[data-mask-date-01]").mask("0000"),$(".select-item").each(function(){var e=$(this);e.select2({placeholder:e.data("select-placeholder")&&0<e.data("select-placeholder").length?e.data("select-placeholder"):"Please select...",allowClear:!0,minimumResultsForSearch:1/0})}),$('[name="owner_name"]').on("keyup focusout",function(){!function(e){var t=e.val(),e=t.split(" ").slice(0,-1).join(" ").trim(),t=t.split(" ").slice(-1).join(" ").trim();0==e.length&&0<t.length&&(e=t,t="");$('[name="owner_1_first_name"]').val(e),$('[name="owner_1_last_name"]').val(t)}($(this))})});